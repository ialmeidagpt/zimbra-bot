Vagrant.configure("2") do |config|
  # Configuração da box do Ubuntu 18.04
  config.vm.box = "generic/ubuntu1804"
  config.vm.box_version = "4.3.12"

  # Configura rede privada com IP estático
  config.vm.network "private_network", ip: "172.16.1.20"
  
  # Configuração de recursos da máquina virtual
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "12000"
    vb.cpus = 3
  end

  # Provisionar o script zimbrainstall.sh na máquina virtual
  config.vm.provision "file", source: "./zimbrainstall.sh", destination: "/home/vagrant/zimbrainstall.sh"

  # Permitir execução do script
  config.vm.provision "shell", inline: <<-SHELL
    chmod +x /home/vagrant/zimbrainstall.sh
  SHELL

  # Configurar mensagem após iniciar
  config.vm.provision "shell", inline: <<-SHELL, run: "always"
    echo "Bem-vindo! O script 'zimbrainstall.sh' está em /home/vagrant. Para executá-lo, digite:"
    echo "sudo /home/vagrant/zimbrainstall.sh"
  SHELL
end
